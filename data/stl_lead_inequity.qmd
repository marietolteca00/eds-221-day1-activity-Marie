---
title: "stl_lead_inequity"
format: html
---
## Loading in libraries- Installed in Console pane already
```{r}
library(tidyverse)
library(janitor)
```
```{r}
stl_lead <- read_csv(here::here("data", "stl_blood_lead.csv"))

names(stl_lead)

stl_lead <- stl_lead %>% clean_names()

names(stl_lead)

skimr::skim(stl_lead)

dim(stl_lead)
```

## Seciton 2 Data Import and Exploration
In a new code chunk, from stl_blood_lead create a new data frame called stl_lead_prop that has one additional column called prop_white that returns the percent of each census tract identifying as white (variable white in the dataset divided by variable totalPop, times 100). You may need to do some Googling. Hint: dplyr::mutate(new_col = col_a / col_b) will create a new column new_col that contains the value of col_a / col_b
# in console type ?mutate for definition
```{r}
stl_lead_prop <- stl_lead %>% 
  mutate(prop_white = (white / total_pop) *100 ) # faster and efficient way to calculate it

# OR
#   mutate(.data = stl_lead, prop_white = (white / total_pop) *100 ) #this will consume more time


dim(stl_lead_prop)
names(stl_lead_prop)
```
## Creating a scatterplot
```{r}
# PLOT IT !
stl_lead_plot <- ggplot(data= stl_lead_prop,
       aes(x= pct_elevated, y= white)) +
  geom_point(size= 5, alpha = 20, colour="lightblue") +
  theme_grey() +
  labs(title = "Percent of elevated blood pressue in people who identify as white",
       x = "elevated",
       y = "white indentifying percent")

stl_lead_plot

# Save Plot !
ggsave(here::here("figs", "stl_lead_plot.png"), height = 6, width = 7)
```
## Creating a histogram
```{r}
stl_lead_hist_plot <- ggplot(data= stl_lead_prop,
       aes(x= pct_elevated)) +
  geom_histogram(stat_bin=10, colour="lightblue") +
  theme_grey() +
  labs(title = "Percent of elevated blood pressue",
       x = "elevated")

stl_lead_hist_plot

ggsave(here::here("figs", "stl_lead_hist_plot.png"), height = 6, width = 7)

```

